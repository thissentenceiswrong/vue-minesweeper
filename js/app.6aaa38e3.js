(function(e){function n(n){for(var i,o,s=n[0],u=n[1],c=n[2],d=0,f=[];d<s.length;d++)o=s[d],Object.prototype.hasOwnProperty.call(r,o)&&r[o]&&f.push(r[o][0]),r[o]=0;for(i in u)Object.prototype.hasOwnProperty.call(u,i)&&(e[i]=u[i]);l&&l(n);while(f.length)f.shift()();return a.push.apply(a,c||[]),t()}function t(){for(var e,n=0;n<a.length;n++){for(var t=a[n],i=!0,s=1;s<t.length;s++){var u=t[s];0!==r[u]&&(i=!1)}i&&(a.splice(n--,1),e=o(o.s=t[0]))}return e}var i={},r={app:0},a=[];function o(n){if(i[n])return i[n].exports;var t=i[n]={i:n,l:!1,exports:{}};return e[n].call(t.exports,t,t.exports,o),t.l=!0,t.exports}o.m=e,o.c=i,o.d=function(e,n,t){o.o(e,n)||Object.defineProperty(e,n,{enumerable:!0,get:t})},o.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,n){if(1&n&&(e=o(e)),8&n)return e;if(4&n&&"object"===typeof e&&e&&e.__esModule)return e;var t=Object.create(null);if(o.r(t),Object.defineProperty(t,"default",{enumerable:!0,value:e}),2&n&&"string"!=typeof e)for(var i in e)o.d(t,i,function(n){return e[n]}.bind(null,i));return t},o.n=function(e){var n=e&&e.__esModule?function(){return e["default"]}:function(){return e};return o.d(n,"a",n),n},o.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)},o.p="";var s=window["webpackJsonp"]=window["webpackJsonp"]||[],u=s.push.bind(s);s.push=n,s=s.slice();for(var c=0;c<s.length;c++)n(s[c]);var l=u;a.push([0,"chunk-vendors"]),t()})({0:function(e,n,t){e.exports=t("56d7")},"0ff0":function(e,n,t){"use strict";var i=t("6bb5"),r=t.n(i);r.a},"1bc8":function(e,n,t){},"1c66":function(e,n,t){"use strict";var i=t("a7d8"),r=t.n(i);r.a},5391:function(e,n,t){"use strict";var i=t("708b"),r=t.n(i);r.a},"553d":function(e,n,t){},"56d7":function(e,n,t){"use strict";t.r(n);t("e260"),t("e6cf"),t("cca6"),t("a79d");var i=t("2b0e"),r=function(){var e=this,n=e.$createElement,t=e._self._c||n;return t("div",[t("Setting"),t("Game")],1)},a=[],o=function(){var e=this,n=e.$createElement,t=e._self._c||n;return t("div",[t("div",[t("button",{directives:[{name:"show",rawName:"v-show",value:!e.visible,expression:"!visible"}],on:{click:e.show}},[e._v("Change")])]),t("div",{directives:[{name:"show",rawName:"v-show",value:e.visible,expression:"visible"}]},[t("h1",[e._v("Settings")]),t("p",[e._v("Preset: todo")]),t("p",[e._v("Number of rows:")]),t("input",{directives:[{name:"model",rawName:"v-model",value:e.row,expression:"row"}],attrs:{type:"number",placeholder:"number of rows"},domProps:{value:e.row},on:{input:function(n){n.target.composing||(e.row=n.target.value)}}}),t("p",[e._v("Number of columns:")]),t("input",{directives:[{name:"model",rawName:"v-model",value:e.col,expression:"col"}],attrs:{type:"number",placeholder:"number of columns"},domProps:{value:e.col},on:{input:function(n){n.target.composing||(e.col=n.target.value)}}}),t("p",[e._v("Number of mines:")]),t("input",{directives:[{name:"model",rawName:"v-model",value:e.mines,expression:"mines"}],attrs:{type:"number",placeholder:"number of mines"},domProps:{value:e.mines},on:{input:function(n){n.target.composing||(e.mines=n.target.value)}}}),t("button",{on:{click:e.startNewGame}},[e._v("Start New Game")])])])},s=[],u=t("5530"),c=t("2f62"),l={data:function(){return{col:9,row:9,mines:10,visible:!0}},mounted:function(){this.startNewGame()},computed:{},methods:Object(u["a"])(Object(u["a"])({},Object(c["b"])("game",["init"])),{},{startNewGame:function(){this.init({row:parseInt(this.row),col:parseInt(this.col),mines:parseInt(this.mines)}),this.visible=!1},show:function(){this.visible=!0}})},d=l,f=t("2877"),m=Object(f["a"])(d,o,s,!1,null,"4b85357b",null),v=m.exports,b=function(){var e=this,n=e.$createElement,t=e._self._c||n;return t("div",[t("h1",[e._v("Game")]),t("div",{directives:[{name:"show",rawName:"v-show",value:e.isLoading,expression:"isLoading"}],attrs:{id:"loading"}},[e._v("Loading...")]),t("div",{directives:[{name:"show",rawName:"v-show",value:!e.isLoading,expression:"!isLoading"}]},[t("p",[e._v("Mines Left: "+e._s(e.numMinesLeft))]),t("div",{style:e.containerStyleObject,attrs:{id:"gameboard"}},[e._l(e.gameboard,(function(e,n){return t("Cell",{key:n,attrs:{id:"cell",index:n,item:e}})})),t("div",{attrs:{id:"clearFloat"}})],2)])])},g=[],p=(t("4de4"),function(){var e=this,n=e.$createElement,t=e._self._c||n;return t("div",{attrs:{id:"cell"},on:{click:e.leftClick,contextmenu:function(n){return n.preventDefault(),e.rightClick(n)}}},[t(e.currentCell,{tag:"component",attrs:{index:e.index,item:e.item}})],1)}),h=[],x=function(){var e=this,n=e.$createElement;e._self._c;return e._m(0)},w=[function(){var e=this,n=e.$createElement,t=e._self._c||n;return t("div",{attrs:{id:"bomb"}},[t("i",{staticClass:"fas fa-certificate"})])}],O={},y=O,M=(t("835b"),Object(f["a"])(y,x,w,!1,null,"1d2acc13",null)),_=M.exports,j=function(){var e=this,n=e.$createElement,t=e._self._c||n;return t("div",{class:e.objClass,attrs:{id:"flag"}},[t("i",{staticClass:"fas fa-flag",attrs:{id:"base"}}),e.wrong?t("i",{staticClass:"fas fa-times",attrs:{id:"cross"}}):e._e()])},C=[],N={props:["item"],computed:Object(u["a"])(Object(u["a"])({},Object(c["d"])("game",{isGameOver:function(e){return e.isGameOver}})),{},{wrong:function(){return!!this.isGameOver&&!this.item.isMine},objClass:function(){return{flaged:!this.isGameOver,wrongFlag:this.isGameOver&&this.wrong,rightFlag:this.isGameOver&&!this.wrong}}})},G=N,S=(t("7cae"),Object(f["a"])(G,j,C,!1,null,"134791ff",null)),L=S.exports,T=function(){var e=this,n=e.$createElement;e._self._c;return e._m(0)},E=[function(){var e=this,n=e.$createElement,t=e._self._c||n;return t("div",{attrs:{id:"bomb"}},[t("i",{staticClass:"fas fa-bomb"})])}],F={},$=F,P=(t("1c66"),Object(f["a"])($,T,E,!1,null,"43c1d052",null)),k=P.exports,I=function(){var e=this,n=e.$createElement,t=e._self._c||n;return t("div",{attrs:{id:"number"}},[t("div",{directives:[{name:"show",rawName:"v-show",value:e.number,expression:"number"}]},[e._v(" "+e._s(e.number)+" ")])])},R=[],W={props:["index"],computed:{number:function(){return this.$store.getters["game/cell"](this.index).numMinesNear}}},B=W,U=(t("d4af"),Object(f["a"])(B,I,R,!1,null,"4cd416e8",null)),z=U.exports,A=function(){var e=this,n=e.$createElement,t=e._self._c||n;return t("div",{attrs:{id:"unrevealed"}})},J=[],D={},q=D,H=(t("5391"),Object(f["a"])(q,A,J,!1,null,"cf7c1bb8",null)),K=H.exports,Q={components:{Boom:_,Flag:L,Mine:k,Number:z,Unrevealed:K},props:["index","item"],methods:Object(u["a"])(Object(u["a"])({},Object(c["b"])("game",["revealCell","flagCell"])),{},{leftClick:function(){var e=this.indexToxy(this.index);this.revealCell({x:e.x,y:e.y})},rightClick:function(){var e=this.indexToxy(this.index);this.flagCell({x:e.x,y:e.y})}}),computed:Object(u["a"])(Object(u["a"])(Object(u["a"])({},Object(c["c"])("game",["indexToxy"])),Object(c["d"])("game",{isWon:function(e){return e.isWon},finalMove:function(e){return e.finalMove}})),{},{currentCell:function(){return this.isWon||this.finalMove!==this.index?this.item.isFlagged?"Flag":this.item.isRevealed?this.item.isMine?"Mine":"Number":"Unrevealed":"Boom"}})},V=Q,X=Object(f["a"])(V,p,h,!1,null,"09e118bd",null),Y=X.exports,Z={components:{Cell:Y},data:function(){return{widthCell:40}},computed:Object(u["a"])(Object(u["a"])({},Object(c["d"])("game",{col:function(e){return e.col},gameboard:function(e){return e.gameboard},numMines:function(e){return e.mines},isLoading:function(e){return e.isLoading}})),{},{numMinesLeft:function(){return this.numMines-this.gameboard.filter((function(e){var n=e.isFlagged;return n})).length},containerStyleObject:function(){return{width:"".concat(this.widthCell*this.col,"px")}}}),methods:Object(u["a"])({},Object(c["b"])("game",["init"]))},ee=Z,ne=(t("0ff0"),Object(f["a"])(ee,b,g,!1,null,"6cf7c1e4",null)),te=ne.exports,ie={components:{Setting:v,Game:te}},re=ie,ae=Object(f["a"])(re,r,a,!1,null,"63b38f7c",null),oe=ae.exports,se=(t("4160"),t("d3b7"),t("6062"),t("3ca3"),t("159b"),t("ddb0"),t("b85c")),ue=t("1a92"),ce=t.n(ue);t("6b93");function le(e){var n=!1;return e.forEach((function(e){void 0===e&&(n=!0)})),n}function de(e,n,t,i){if(le([e,n,t,i]))throw"Undefined param";for(var r=[],a=e-1;a<=e+1;a++)for(var o=n-1;o<=n+1;o++)a<0||o<0||a>=t||o>=i||a===e&&o===n||r.push({x:a,y:o});return r}var fe={isLoading:!1,row:0,col:0,mines:0,isGameOver:!1,isWon:null,finalMove:null,setMines:new Set,gameboard:[]},me={xyToIndex:function(e){return function(n,t){return e.col*n+t}},indexToxy:function(e){return function(n){return{x:Math.floor(n/e.col),y:n%e.col}}},cell:function(e){return function(n){return e.gameboard[n]}},numMinesAround:function(e,n){return function(t){var i=t.x,r=t.y;if(n.isMine({x:i,y:r}))return null;var a=0;return de(i,r,e.row,e.col).forEach((function(e){var t=e.x,i=e.y;a+=n.isMine({x:t,y:i})?1:0})),a}},isMine:function(e,n){return function(t){var i=t.x,r=t.y;return e.setMines.has(n.xyToIndex(i,r))}},hasWin:function(e){return function(){return e.gameboard.filter((function(e){var n=e.isRevealed;return!n})).length===e.mines}}},ve={reset:function(e,n){var t=n.row,i=n.col,r=n.mines;e.row=t,e.col=i,e.mines=r,e.isGameOver=!1,e.isWon=null,e.finalMove=null,e.setMines=new Set,e.gameboard=[]},generateMines:function(e){for(var n=e.setMines,t=[],i=0;i<e.gameboard.length;i++)t.push(i);ce()(t);while(n.size<e.mines){var r=t.shift();e.gameboard[r].isRevealed||(n.add(r),e.gameboard[r].isMine=!0)}},initBoard:function(e){for(var n=0;n<e.row*e.col;n++)e.gameboard.push({isRevealed:!1,isMine:!1,isFlagged:!1,numMinesNear:0})},updateLoadingStatus:function(e,n){e.isLoading=n},updateBoard:function(e,n){var t=n.index,i=n.isRevealed,r=n.isMine,a=n.isFlagged,o=n.numMinesNear,s=e.gameboard[t];void 0!==i&&(s.isRevealed=i),void 0!==r&&(s.isMine=r),void 0!==a&&(s.isFlagged=a),void 0!==o&&(s.numMinesNear=o)},gameOver:function(e,n){var t=n.won,i=n.finalMove;e.isGameOver=!0,e.isWon=t,e.finalMove=i;var r,a=Object(se["a"])(e.setMines.values());try{for(a.s();!(r=a.n()).done;){var o=r.value;e.isWon?e.gameboard[o].isFlagged=!0:e.gameboard[o].isRevealed=!0}}catch(s){a.e(s)}finally{a.f()}}},be={init:function(e,n){var t=e.commit,i=n.row,r=n.col,a=n.mines;t("updateLoadingStatus",!0),new Promise((function(e){setTimeout((function(){t("reset",{row:i,col:r,mines:a}),t("initBoard"),e()}),500)})).then((function(){return t("updateLoadingStatus",!1)}))},revealCell:function(e,n){var t=e.commit,i=e.state,r=e.getters,a=n.x,o=n.y;if(!i.isGameOver)if(r.isMine({x:a,y:o}))t("gameOver",{won:!1,finalMove:r.xyToIndex(a,o)});else{var s=[{x:a,y:o}];while(0!==s.length){var u=s.shift(),c=r.xyToIndex(u.x,u.y),l=i.gameboard[c];if(!l.isRevealed){if(t("updateBoard",{index:c,isRevealed:!0,isFlagged:!1}),0===i.setMines.size)for(var d in t("generateMines"),i.gameboard){d=parseInt(d);var f=r.numMinesAround(r.indexToxy(d));t("updateBoard",{index:d,numMinesNear:f})}0===l.numMinesNear&&de(u.x,u.y,i.row,i.col).forEach((function(e){s.push(e)}))}}r.hasWin()&&t("gameOver",{won:!0,finalMove:r.xyToIndex(a,o)})}},flagCell:function(e,n){var t=e.commit,i=e.state,r=e.getters,a=n.x,o=n.y;if(!i.isGameOver){var s=r.xyToIndex(a,o),u=i.gameboard[s];u.isRevealed||t("updateBoard",{index:s,isFlagged:!u.isFlagged})}}},ge={namespaced:!0,state:fe,getters:me,mutations:ve,actions:be};i["a"].use(c["a"]);var pe=new c["a"].Store({modules:{game:ge},strict:!0});i["a"].config.productionTip=!1,new i["a"]({store:pe,render:function(e){return e(oe)}}).$mount("#app")},"6bb5":function(e,n,t){},"708b":function(e,n,t){},"7cae":function(e,n,t){"use strict";var i=t("1bc8"),r=t.n(i);r.a},"835b":function(e,n,t){"use strict";var i=t("553d"),r=t.n(i);r.a},a7d8:function(e,n,t){},d4af:function(e,n,t){"use strict";var i=t("fc16"),r=t.n(i);r.a},fc16:function(e,n,t){}});
//# sourceMappingURL=app.6aaa38e3.js.map